========================================
ナレッジ管理ツール（K_Shot） - ポータブル版
========================================

【すぐに始める】

1. setup-complete.bat をダブルクリック
   → ポータブルNode.jsが自動的にセットアップされます
   → （初回のみ必要、インターネット接続が必要です）

2. start.bat をダブルクリック
   → サーバーが起動します

3. ブラウザで http://localhost:3005 にアクセス
   → 初回起動時は初期設定画面が表示されます
   → ネットワークドライブの設定を行ってください

【セットアップ手順（詳細）】

■ 方法A: 自動セットアップ（推奨）

1. setup-complete.bat をダブルクリック
   - ポータブルNode.jsが自動的にダウンロード・セットアップされます
   - インターネット接続が必要です
   - 完了まで数分かかる場合があります
   - PowerShellの実行ポリシーでエラーが出る場合は、管理者権限で実行してください

2. start.bat をダブルクリックしてサーバーを起動

■ 方法B: 手動セットアップ

1. Node.jsのセットアップ
   - https://nodejs.org/ からNode.js LTS版（推奨: v20.x または v25.x）をダウンロード
   - 7-ZipなどでZIPファイルを展開
   - 展開したフォルダ内のすべてのファイルを、このフォルダの "node" フォルダにコピー
   - node.exe が node\node.exe に存在することを確認

2. start.bat をダブルクリックしてサーバーを起動

■ 方法C: システムのNode.jsを使用

- システムにNode.jsがインストールされている場合
- start.bat を編集して、ポータブルNode.jsのチェック部分を削除またはコメントアウトしてください

【初回起動時の設定】

1. ブラウザで http://localhost:3005 にアクセス
2. 初期設定画面が表示されます
3. 以下の情報を入力してください:
   - ネットワークパス（例: \\server-name\share）
   - ドライブレター（例: R）
4. 設定を保存すると、アプリケーションが使用可能になります

【設定の変更】

■ ポート番号の変更

デフォルトポートは3005です。変更する場合は:

    set PORT=3000
    start.bat

または、start.bat を編集して PORT の値を変更してください。

■ ログレベルの設定

デフォルトのログレベルはERRORです。変更する場合は:

    set LOG_LEVEL=DEBUG
    start.bat

設定可能な値: DEBUG, INFO, WARN, ERROR

【データの保存場所】

- データベース: ネットワークドライブの {ドライブ}:\k_shot\shared\k_shot.db
- ユーザーデータ: ネットワークドライブの {ドライブ}:\k_shot\users\
- 設定ファイル: このフォルダの app\data\config\drive.json
- デバイストークン: %APPDATA%\k-shot\credentials\device-token.json

【注意事項】

- このパッケージには、ビルド済みのアプリケーションが含まれています
- 開発用のファイル（.git, src/ の一部など）は含まれていません
- データはネットワークドライブに保存されます（初回起動時に設定）
- node_modules フォルダには本番用の依存関係のみが含まれます
- テストツール（vitestなど）や開発ツールは配布物に含まれません
- 配布物のサイズが最適化されています

【トラブルシューティング】

■ サーバーが起動しない場合

1. node\node.exe が存在するか確認
   - 存在しない場合は setup-complete.bat を実行してください

2. ポートが他のアプリケーションで使用されていないか確認
   - デフォルトポート3005が使用中の場合は、別のポートを指定してください

3. ファイアウォールの設定を確認
   - 必要に応じて、ファイアウォールでポートを許可してください

■ データベースエラーが発生する場合

1. ネットワークドライブが正しくマウントされているか確認
   - エクスプローラーでドライブレターにアクセスできるか確認してください

2. 初回起動時の設定を確認
   - ネットワークパスとドライブレターが正しく設定されているか確認してください

3. 共有フォルダへのアクセス権限を確認
   - 読み書き権限があるか確認してください

■ setup-complete.bat でエラーが出る場合

1. インターネット接続を確認
   - Node.jsのダウンロードにはインターネット接続が必要です

2. PowerShellの実行ポリシーを確認
   - エラーが出る場合は、管理者権限で実行してください
   - または、PowerShellを開いて以下を実行:
     Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser

3. 手動セットアップを試す
   - 方法B（手動セットアップ）を参照してください

【更新時の注意】

- このフォルダを更新する場合、以下のフォルダ・ファイルは保持されます:
  - node\ フォルダ（ポータブルNode.js）
  - app\data\ フォルダ（設定ファイル）
- 既存の設定やデータは保持されます
- 初回セットアップは不要です（既に設定済みの場合）

【サポート】

詳細なドキュメントは、アプリケーション内の「ヘルプ」ページを参照してください。
また、プロジェクトの README.md も参照できます。
