# 📖 利用者マニュアル

学習管理システムで利用者が日常的に行う操作をまとめています。このマニュアルでは、画面の操作手順をテキストで詳しく説明しています。

---

## 1. ログイン方法

このシステムは Windows 認証を使用しています。初回アクセス時に自動的にログインされます。

### 初回アクセス時の手順

1. **ブラウザでシステムにアクセス**
   - システムのURLにアクセスします
   - Windows 認証が自動的に実行されます
   - 追加のログイン操作は不要です

2. **初期設定画面の表示**
   - 初回アクセス時は、初期設定画面（`/setup`）が自動的に表示されます
   - ネットワークドライブの設定が必要です

3. **設定完了後の動作**
   - 設定完了後、自動的にホーム画面へ遷移します
   - 次回以降は直接ホーム画面が表示されます

> 💡 **メモ**  
> 初回起動時は、ネットワークドライブ設定が必要です。初期設定画面でネットワークパスとドライブレターを設定してください。

### 1.1 初期設定画面

初回起動時に `/setup` が表示されます。この画面でネットワークドライブの設定を行います。

#### 初期設定の流れ

**ステップ1: ネットワークパスを入力**

- ネットワーク共有フォルダのUNCパスを入力します
- 入力例:
  - `\\server-name\share\`
  - `\\192.168.1.100\share\`
- **重要**: `k_shot` フォルダ名は含めないでください
- **重要**: 末尾のバックスラッシュ（`\`）は必須です

**ステップ2: ドライブレターを選択**

- 画面に利用可能なドライブレターが一覧表示されます
- 既存のフォルダがある場合は `(既存フォルダあり)` と表示されます
- 使用したいドライブレターを選択します

**ステップ3: マウントを実行**

- 「マウント」ボタンをクリックします
- システムが `net use` コマンドを実行してネットワークドライブをマウントします
- Windows 認証を利用するため、追加の認証情報入力は不要です

**ステップ4: フォルダの確認・作成**

- システムが `{選択したドライブレター}:\k_shot` フォルダの存在を確認します
- フォルダが存在しない場合は、「フォルダを自動作成する」にチェックを入れてください
- チェックを入れると、システムが自動的にフォルダを作成します

**ステップ5: 設定を保存**

- 「設定を保存」ボタンをクリックします
- 設定は `data/config/drive.json` に保存されます
- 保存後、キャッシュがクリアされ、ホーム画面へ自動的にリダイレクトされます

> ⚠️ **重要**  
> ネットワークパスを変更したい場合は、設定ページ（`/admin`）から「初期設定を再開」を選択して再設定します。

---

## 2. ホーム画面の使い方

ホーム画面（`/`）では、システムの概要情報とクイックアクセスが提供されます。サイドバーから「ホーム」を選択すると表示されます。

### 画面の構成

ホーム画面は以下のセクションで構成されています：

- **閲覧履歴**: 最近閲覧した資料の一覧
- **新規・変更されたナレッジ**: 最近追加・更新された資料の一覧
- **クイックアクション**: 主要機能へのショートカット

### 2.1 閲覧履歴

**表示内容**

- 最近閲覧した資料が時系列で表示されます
- 各項目には資料のタイトル、説明、最終閲覧日時が表示されます

**操作方法**

- 資料をクリックすると、詳細モーダルが開きます
- 各項目の右側にある ✕ ボタンをクリックすると、その項目を閲覧履歴から削除できます
- 閲覧履歴は設定ページ（`/admin`）の「データ管理」から一括削除することも可能です

### 2.2 新規・変更されたナレッジ

**表示内容**

- 最近追加・更新されたナレッジ（資料）が一覧表示されます
- 更新日時が新しい順に表示されます

**操作方法**

- 資料をクリックすると、詳細モーダルが開きます
- モーダル内で資料の内容を確認したり、添付ファイルをダウンロードしたりできます

### 2.3 404 エラー時の検索補助

**動作**

- 資料が見つからない場合（404エラー）に、確認ダイアログが自動的に表示されます
- ダイアログには「検索しますか？」というメッセージが表示されます

**操作方法**

- 「はい」を選択すると、ヘッダーの検索欄にキーワードが自動入力されます
- 検索画面にフォーカスが移動し、検索結果が表示されます
- 「いいえ」を選択すると、ダイアログが閉じます

---

## 3. ナレッジ（資料管理）

ナレッジ画面（`/materials`）では、学習資料の閲覧・検索・アップロードが可能です。サイドバーから「ナレッジ」を選択すると表示されます。

### 画面の構成

ナレッジ画面は以下の要素で構成されています：

- **タブ**: 「階層表示」と「検索」の2つのタブがあります
- **検索バー**: 資料を検索するための入力欄（検索タブで表示）
- **フィルター**: カテゴリ、タイプ、作成者で絞り込み（検索タブで表示）
- **表示切替ボタン**: グリッド表示とリスト表示を切り替え
- **資料一覧**: 資料がカードまたはリスト形式で表示されます

### 3.1 階層表示タブ

**機能説明**

- フォルダ構造で資料を階層的に閲覧できます
- Windows エクスプローラーと同様の操作感で、フォルダを開いて中身を確認できます

**操作方法**

- フォルダをクリックすると、そのフォルダの中身が表示されます
- パンくずリストで現在の位置を確認できます
- 「←」ボタンで上位フォルダに戻れます
- 空のスペースを右クリックすると、新規フォルダを作成できます

### 3.2 検索タブ

**機能説明**

- タイトルや説明文を対象にリアルタイム検索が可能です
- 検索結果は入力と同時に更新されます

**操作方法**

1. 検索タブをクリックします
2. 検索バーにキーワードを入力します
3. 検索結果がリアルタイムで表示されます

#### 3.2.1 フィルター機能

**フィルターの種類**

- **すべて / お気に入り**: 表示する資料の対象を切り替えます
  - 「すべて」: すべての資料を表示
  - 「お気に入り」: お気に入り登録した資料のみ表示
- **フィルターボタン**: カテゴリ、タイプ、作成者で絞り込みが可能
  - フィルターボタンをクリックすると、フィルターパネルが開きます
  - 複数の条件を組み合わせて検索できます

**フィルターの使い方**

1. フィルターボタン（通常は検索バーの近くに表示）をクリックします
2. フィルターパネルが開きます
3. カテゴリ、タイプ、作成者から選択します
4. 選択した条件で資料が絞り込まれます

### 3.3 グリッド / リスト表示の切り替え

**機能説明**

- 資料の表示スタイルを「グリッド表示」と「リスト表示」で切り替えられます
- 最後に選択した表示スタイルは記憶され、次回アクセス時も同じスタイルで表示されます

**操作方法**

- 画面右下の表示切替ボタンをクリックします
- グリッド表示: カード形式で資料が表示されます（視覚的に見やすい）
- リスト表示: リスト形式で資料が表示されます（情報量が多い）

### 3.4 資料のアップロード

**機能説明**

- Web UIから直接資料をアップロードできます
- アップロードの進捗はプログレスバーで確認できます

**操作方法**

1. 階層表示タブで、アップロード先のフォルダを開きます
2. 空のスペースを右クリックして、「新規資料作成」を選択します
3. アップロードモーダルが開きます
4. 以下の情報を入力します：
   - **タイトル**: 資料のタイトル（必須）
   - **説明**: 資料の説明文（任意）
   - **カテゴリ**: 資料のカテゴリ（任意）
   - **タイプ**: 資料のタイプ（任意）
   - **本文**: Markdown形式の本文（任意）
   - **添付ファイル**: ファイルをドラッグ&ドロップまたは選択してアップロード
5. 「アップロード」ボタンをクリックします
6. プログレスバーでアップロードの進捗を確認できます
7. アップロードが完了すると、資料一覧に追加されます

### 3.5 資料の閲覧

**機能説明**

- 資料をクリックすると、詳細モーダルが開きます
- モーダル内で以下の操作が可能です：
  - Markdown本文の閲覧
  - 添付ファイルの閲覧・ダウンロード
  - コメントの閲覧・投稿
  - お気に入り・いいねの操作

**操作方法**

1. 資料一覧から閲覧したい資料をクリックします
2. 詳細モーダルが開きます
3. モーダル内で資料の内容を確認します
4. 添付ファイルがある場合は、ファイル名をクリックしてダウンロードできます
5. コメント欄でコメントを投稿できます
6. モーダル外をクリックするか、×ボタンでモーダルを閉じます

#### 3.5.1 右クリックメニュー

資料を右クリックすると、以下の操作メニューが表示されます：

- **ダウンロード（ZIP）**: 資料と添付ファイルをZIP形式でダウンロード
- **編集**: 資料の内容を編集（作成者のみ可能）
- **リンクをコピー**: 資料への直接リンクをクリップボードにコピー
- **移動**: 資料を別のフォルダに移動
- **ファイル情報**: 資料の詳細情報（作成者、作成日時、更新日時など）を表示
- **通知を送信**: 他のユーザーに通知を送信
- **ゴミ箱に移動**: 資料を削除（ゴミ箱へ移動）

> 💡 **メモ**  
> 編集・削除は作成者のみ可能です。他ユーザーが作成した資料は閲覧専用です。

### 3.6 フォルダ管理

**機能説明**

- フォルダの作成、名前変更、移動、削除が可能です
- 右クリックメニューから操作します

**操作方法**

**新規フォルダ作成**

1. 階層表示タブで、作成したい場所の空スペースを右クリックします
2. 「新規フォルダ作成」を選択します
3. フォルダ名を入力します
4. フォルダが作成されます

**フォルダ名変更**

1. 変更したいフォルダを右クリックします
2. 「フォルダ名変更」を選択します
3. 新しいフォルダ名を入力します

**フォルダ移動**

1. 移動したいフォルダを右クリックします
2. 「移動」を選択します
3. 移動先のフォルダを選択します

**プロパティ表示**

1. フォルダを右クリックします
2. 「プロパティ」を選択します
3. フォルダの詳細情報が表示されます

**削除（ゴミ箱へ移動）**

1. 削除したいフォルダを右クリックします
2. 「ゴミ箱に移動」を選択します
3. 確認ダイアログで「はい」を選択します
4. フォルダとその中身がゴミ箱へ移動されます

**リンクをコピー**

1. フォルダを右クリックします
2. 「リンクをコピー」を選択します
3. フォルダへの直接リンクがクリップボードにコピーされます

### 3.7 お気に入り・いいね機能

**機能説明**

- 資料にお気に入り登録やいいねを付与できます
- お気に入り数やいいね数が資料カードに表示されます

**操作方法**

**お気に入り登録**

1. 資料カードまたは詳細モーダル内のお気に入りボタン（ハートアイコン）をクリックします
2. お気に入りに登録され、ボタンが塗りつぶされた状態になります
3. 再度クリックすると、お気に入りから解除されます

**いいね**

1. 資料カードまたは詳細モーダル内のいいねボタンをクリックします
2. いいねが付与され、数値が増加します
3. 再度クリックすると、いいねを取り消せます

---

## 4. メンバー管理

メンバー画面（`/members`）では、システムに登録されているメンバーの一覧と詳細情報を確認できます。サイドバーから「利用者一覧」を選択すると表示されます。

### 画面の構成

- **メンバー一覧**: メンバーがカードまたはリスト形式で表示されます
- **検索バー**: メンバーを検索するための入力欄
- **表示切替ボタン**: グリッド表示とリスト表示を切り替え

### 4.1 メンバー一覧

**表示内容**

- メンバーの名前、アバター、部署などの基本情報が表示されます
- グリッド表示とリスト表示を切り替えられます

**操作方法**

- メンバーカードをクリックすると、詳細モーダルが開きます
- 検索バーにキーワードを入力すると、メンバーを検索できます

### 4.2 メンバー詳細

**表示内容**

メンバー詳細モーダルでは、以下の情報を確認できます：

- **プロフィール情報**
  - 表示名
  - メールアドレス
  - 部署
  - 自己紹介
  - アバター画像
- **スキル**: 登録されているスキルの一覧
- **資格**: 取得している資格の一覧
- **職場内資格**: 職場内で取得した資格の一覧

**操作方法**

1. メンバー一覧から詳細を確認したいメンバーをクリックします
2. 詳細モーダルが開きます
3. モーダル内で各種情報を確認します
4. モーダル外をクリックするか、×ボタンでモーダルを閉じます

---

## 5. 通知機能

通知機能では、システム内での重要な情報や更新を通知として受け取れます。ヘッダー右上の通知アイコンからアクセスできます。

### 画面の構成

- **通知アイコン**: ヘッダー右上に表示され、未読通知数がバッジで表示されます
- **通知一覧モーダル**: 通知アイコンをクリックすると開きます
- **通知設定**: 設定ページ（`/admin`）で通知の頻度を設定できます

### 5.1 通知アイコンとバッジ

**表示内容**

- ヘッダー右上に通知アイコン（ベルアイコン）が表示されます
- 未読通知がある場合、アイコンの上に赤いバッジで未読数が表示されます

**操作方法**

- 通知アイコンをクリックすると、通知一覧モーダルが開きます

### 5.2 通知一覧

**表示内容**

通知一覧モーダルでは、以下の情報が表示されます：

- **未読通知**: まだ読んでいない通知
- **既読通知**: 既に読んだ通知
- 各通知には以下が含まれます：
  - タイトル
  - メッセージ
  - 送信者
  - 送信日時
  - 関連資料へのリンク（ある場合）

**操作方法**

1. 通知アイコンをクリックしてモーダルを開きます
2. 通知をクリックすると、関連する資料の詳細モーダルが開きます（関連資料がある場合）
3. 通知の右側にあるチェックボックスで既読/未読を切り替えられます
4. 通知の右側にある×ボタンで個別に削除できます
5. モーダル下部の「すべて既読にする」ボタンで、すべての通知を既読にできます
6. モーダル下部の「すべて削除」ボタンで、すべての通知を削除できます

### 5.3 Windows 通知

**機能説明**

- 新着通知がある場合、Windows OSの通知が表示されます
- 通知をクリックすると、通知一覧モーダルが開きます

**初回設定**

- 初回アクセス時にブラウザから通知許可を求められます
- 「許可」を選択すると、Windows通知が有効になります
- 「拒否」を選択しても、アプリ内通知は利用可能ですが、Windows通知は表示されません

**通知許可の変更**

- ブラウザの設定から通知許可を変更できます
- 設定ページ（`/admin`）の「通知設定」からも一部の設定を変更できます

### 5.4 通知の送信

**機能説明**

- 資料一覧から他のユーザーに通知を送信できます
- 複数のユーザーに同時に送信できます

**操作方法**

1. ナレッジ画面で、通知を送信したい資料を右クリックします
2. 右クリックメニューから「通知を送信」を選択します
3. 通知送信モーダルが開きます
4. 以下の情報を入力します：
   - **送信先**: 通知を送信するユーザーを選択（複数選択可能）
   - **タイトル**: 通知のタイトル
   - **メッセージ**: 通知の本文
5. 「送信」ボタンをクリックします
6. 選択したユーザーに通知が送信されます

### 5.5 通知ポーリング間隔の設定

**機能説明**

- 通知を取得する頻度（ポーリング間隔）を設定できます
- 設定ページ（`/admin`）の「通知設定」から変更できます

**設定可能な間隔**

- **即座**: ページ表示時やフォーカス時のみ通知を取得（ポーリングしない）
- **1分**: 1分ごとに通知を取得
- **5分**: 5分ごとに通知を取得（推奨）
- **10分**: 10分ごとに通知を取得
- **30分**: 30分ごとに通知を取得

**設定方法**

1. サイドバーから「設定」を選択します
2. 「通知設定」セクションを開きます
3. 「通知ポーリング間隔」から希望の間隔を選択します
4. 「保存」ボタンをクリックします

> ℹ️ **接続状態表示**  
> ヘッダー右上に接続状態（Live / Dead / Inactive）が表示されます。これは通知ポーリングの結果を基に判定されます。ポーリング間隔を「即座」に設定した場合は Inactive と表示されます。

---

## 6. 設定変更

設定ページ（`/admin`）では、システムの各種設定を変更できます。サイドバーから「設定」を選択すると表示されます。

### 画面の構成

設定ページは以下のセクションで構成されています：

- **ネットワークドライブ設定**: ネットワークドライブの設定確認・変更
- **通知設定**: 通知の頻度やバックグラウンド通知の設定
- **データ管理**: 閲覧履歴や検索履歴のクリア
- **アカウント管理**（管理者のみ）: ユーザー管理
- **パスワード管理**（管理者のみ）: パスワードの変更
- **自動バックアップ設定**（管理者のみ）: バックアップのスケジュール設定
- **バックアップ・復元**（管理者のみ）: 手動バックアップと復元

### 6.1 通知設定

**設定項目**

- **通知ポーリング間隔**: 通知を取得する頻度（即座/1分/5分/10分/30分）
- **バックグラウンド通知**: タブが非表示の時も通知を取得するかどうか

**操作方法**

1. 「通知設定」セクションを開きます
2. 「通知ポーリング間隔」から希望の間隔を選択します
3. 「バックグラウンド通知を有効にする」にチェックを入れるか外します
4. 「保存」ボタンをクリックします

### 6.2 データ管理

**機能説明**

- 閲覧履歴や検索履歴をクリアできます
- 個人の利用データを削除できます

**操作方法**

1. 「データ管理」セクションを開きます
2. 削除したい項目の「クリア」ボタンをクリックします
3. 確認ダイアログで「はい」を選択します
4. データが削除されます

**削除可能なデータ**

- **閲覧履歴**: 最近閲覧した資料の履歴
- **検索履歴**: 検索したキーワードの履歴

### 6.3 アカウント管理（管理者のみ）

**機能説明**

- システムに登録されているユーザーを管理できます
- ユーザーの権限変更やアカウント削除が可能です

**操作方法**

1. 「アカウント管理」セクションを開きます
2. ユーザー一覧が表示されます
3. 各ユーザーに対して以下の操作が可能です：
   - **権限変更**: ユーザーの権限（一般/管理者）を変更
   - **アカウント削除**: ユーザーアカウントを削除

### 6.4 パスワード管理（管理者のみ）

**機能説明**

- 管理者のパスワードを変更できます
- Windows認証を使用している場合、この機能は使用されない場合があります

**操作方法**

1. 「パスワード管理」セクションを開きます
2. 現在のパスワードと新しいパスワードを入力します
3. 「変更」ボタンをクリックします

### 6.5 自動バックアップ設定（管理者のみ）

**機能説明**

- データベースの自動バックアップをスケジュール設定できます
- バックアップの保存先や保持期間を設定できます

**設定項目**

- **バックアップを有効にする**: 自動バックアップを有効/無効にする
- **保存先**: バックアップファイルの保存先パス
- **実行時刻**: バックアップを実行する時刻（例: 12:00）
- **保持日数**: バックアップファイルを保持する日数

**操作方法**

1. 「自動バックアップ設定」セクションを開きます
2. 各項目を設定します
3. 「保存」ボタンをクリックします

### 6.6 バックアップ・復元（管理者のみ）

**機能説明**

- データベースの手動バックアップと復元が可能です
- バックアップファイルをダウンロードしたり、アップロードして復元したりできます

**操作方法**

**バックアップの作成**

1. 「バックアップ・復元」セクションを開きます
2. 「バックアップを作成」ボタンをクリックします
3. バックアップファイルがダウンロードされます

**バックアップの復元**

1. 「バックアップ・復元」セクションを開きます
2. 「バックアップファイルを選択」ボタンをクリックします
3. 復元したいバックアップファイルを選択します
4. 「復元」ボタンをクリックします
5. 確認ダイアログで「はい」を選択します
6. データベースが復元されます

> ⚠️ **警告**  
> 復元操作は現在のデータベースを上書きします。復元前に必ずバックアップを取ってください。

### 6.7 ネットワークドライブ設定

**機能説明**

- 現在のネットワークドライブ設定を確認できます
- 初期設定を再開できます

**表示内容**

- **ネットワークパス**: 現在設定されているネットワークパス
- **ドライブレター**: 現在設定されているドライブレター

**操作方法**

1. 「ネットワークドライブ設定」セクションを開きます
2. 現在の設定が表示されます
3. 「初期設定を再開」ボタンをクリックすると、初期設定画面（`/setup`）に遷移します

### 6.8 データベース編集（管理者のみ）

**機能説明**

- データベースのテーブルを直接閲覧・編集できます
- テーブルの追加・削除も可能です

**アクセス方法**

- サイドバーから「データベース」を選択するか、`/admin/database` に直接アクセスします

**操作方法**

1. データベース編集ページを開きます
2. 左側にテーブル一覧が表示されます
3. テーブルを選択すると、そのテーブルのデータが表示されます
4. データの編集、追加、削除が可能です

> ⚠️ **警告**  
> データベースの直接編集は危険な操作です。操作前に必ずバックアップを取ってください。

### 6.9 エラーログ確認（管理者のみ）

**機能説明**

- システムのエラーログや SQLITE_BUSY ログを確認できます
- ログの種別、ユーザー、期間、キーワードでフィルターできます

**アクセス方法**

- サイドバーから「エラーチェック」を選択するか、`/admin/logs` に直接アクセスします

**操作方法**

1. エラーログ確認ページを開きます
2. フィルター条件を設定します：
   - **ログ種別**: エラーログ、SQLITE_BUSY ログなど
   - **ユーザー**: 特定のユーザーのログのみ表示
   - **期間**: 表示する期間を指定
   - **キーワード**: ログ内容で検索
3. フィルター条件に一致するログが表示されます
4. ログをクリックすると、詳細情報が表示されます

---

## 7. ゴミ箱機能

ゴミ箱画面（`/trash`）では、削除した資料やフォルダを確認・復元・完全削除できます。サイドバーから「ゴミ箱」を選択すると表示されます。

### 画面の構成

- **ゴミ箱一覧**: 削除された資料やフォルダが表示されます
- **復元ボタン**: 選択した項目を復元します
- **完全削除ボタン**: 選択した項目を完全に削除します

### 7.1 ゴミ箱への移動

**操作方法**

1. ナレッジ画面で、削除したい資料やフォルダを右クリックします
2. 右クリックメニューから「ゴミ箱に移動」を選択します
3. 確認ダイアログで「はい」を選択します
4. 資料やフォルダがゴミ箱へ移動されます
5. プログレスバーで移動の進捗を確認できます

**注意事項**

- ゴミ箱に移動した資料やフォルダは、完全削除するまで復元可能です
- フォルダを削除すると、その中身も一緒にゴミ箱へ移動されます

### 7.2 復元

**機能説明**

- ゴミ箱から資料やフォルダを復元できます
- フォルダを復元すると、その中身も再帰的に復元されます

**操作方法**

1. ゴミ箱画面を開きます
2. 復元したい資料やフォルダを選択します（複数選択可能）
3. 「復元」ボタンをクリックします
4. 確認ダイアログで「はい」を選択します
5. 資料やフォルダが元の場所に復元されます

**復元先**

- 資料やフォルダは、削除前の場所に復元されます
- 元の場所が存在しない場合は、ルートフォルダに復元されます

### 7.3 完全削除

**機能説明**

- ゴミ箱から完全に削除します
- 完全削除した資料やフォルダは復元できません

**操作方法**

1. ゴミ箱画面を開きます
2. 完全削除したい資料やフォルダを選択します（複数選択可能）
3. 「完全削除」ボタンをクリックします
4. 確認ダイアログで「はい」を選択します
5. 資料やフォルダが完全に削除されます

> ⚠️ **警告**  
> 完全削除した資料やフォルダは復元できません。削除前に必ず内容を確認してください。

---

## 8. グローバル検索

グローバル検索機能では、ヘッダーの検索欄から資料やメンバーを一括検索できます。

### 画面の構成

- **検索バー**: ヘッダー上部に常に表示される検索入力欄
- **検索候補**: 入力に応じてリアルタイムで表示される候補一覧
- **検索履歴**: 過去に検索したキーワードの履歴

### 8.1 検索バー

**表示場所**

- ヘッダー上部の中央に検索バーが表示されます
- どのページからでもアクセスできます

**操作方法**

1. 検索バーをクリックするか、フォーカスします
2. キーワードを入力します
3. 検索候補がリアルタイムで表示されます

### 8.2 リアルタイム候補

**機能説明**

- 入力に応じて、資料やメンバーの候補がリアルタイムで表示されます
- タイトルや説明文にキーワードが含まれるものが候補として表示されます

**操作方法**

1. 検索バーにキーワードを入力します
2. 候補一覧が表示されます
3. 候補をクリックすると、詳細モーダルが開きます（画面遷移なし）

**候補の種類**

- **資料**: タイトルや説明文にキーワードが含まれる資料
- **メンバー**: 名前や部署にキーワードが含まれるメンバー

### 8.3 検索履歴

**機能説明**

- 過去に検索したキーワードが最大10件まで保存されます
- 履歴から再検索できます

**操作方法**

1. 検索バーをクリックします
2. 検索履歴が表示されます
3. 履歴のキーワードをクリックすると、そのキーワードで再検索されます

**履歴の削除**

- 検索履歴は設定ページ（`/admin`）の「データ管理」から一括削除できます

### 8.4 検索結果の表示

**操作方法**

1. 検索バーにキーワードを入力します
2. 候補一覧から選択するか、Enterキーを押します
3. 検索結果が表示されます
4. 資料をクリックすると、詳細モーダルが開きます

---

## 9. コメント機能

コメント機能では、資料に対してコメントを投稿し、他のユーザーと情報を共有できます。

### 機能の場所

- 資料詳細モーダル内にコメントセクションが表示されます
- 資料を開くと、下部にコメント欄が表示されます

### 9.1 コメントの閲覧

**表示内容**

- 資料に投稿されたコメントが時系列で表示されます
- 各コメントには以下が表示されます：
  - 投稿者名
  - 投稿日時
  - コメント本文
  - 添付ファイル（ある場合）

**操作方法**

1. 資料詳細モーダルを開きます
2. モーダル下部のコメントセクションを確認します
3. コメントが時系列で表示されます

### 9.2 コメントの投稿

**操作方法**

1. 資料詳細モーダルを開きます
2. コメントセクションの入力欄にコメントを入力します
3. 必要に応じて、添付ファイルを追加します（ファイルをドラッグ&ドロップまたは選択）
4. 「送信」ボタンをクリックします
5. コメントが投稿され、コメント一覧に表示されます

**添付ファイル**

- コメントに添付ファイルを追加できます
- 複数のファイルを添付できます
- 添付ファイルは他のユーザーがダウンロードできます

### 9.3 階層表示（スレッド）

**機能説明**

- コメントに返信することで、スレッド形式で表示されます
- 親コメントと返信コメントの関係が視覚的に分かりやすく表示されます

**操作方法**

1. 返信したいコメントの「返信」ボタンをクリックします
2. 返信用の入力欄が表示されます
3. 返信内容を入力します
4. 「送信」ボタンをクリックします
5. 返信が親コメントの下に階層表示されます

### 9.4 プライベートコメント

**機能説明**

- 自分のみ閲覧できるコメントを保存できます
- 他のユーザーには表示されません
- メモや備忘録として使用できます

**操作方法**

1. 資料詳細モーダルを開きます
2. コメントセクションの入力欄にコメントを入力します
3. 「プライベートコメントとして保存」にチェックを入れます
4. 「送信」ボタンをクリックします
5. プライベートコメントとして保存されます

**表示**

- プライベートコメントは、自分のコメント一覧に「プライベート」というラベルと共に表示されます
- 他のユーザーには表示されません

---

## 10. お気に入り機能

お気に入り機能では、よく使う資料をお気に入りに登録し、簡単にアクセスできます。

### 機能の場所

- サイドバーから「お気に入り」を選択すると、お気に入り一覧画面（`/favorites`）が表示されます
- 資料カードや詳細モーダル内にお気に入りボタン（ハートアイコン）が表示されます

### 10.1 お気に入りの登録

**操作方法**

1. ナレッジ画面で、お気に入りに登録したい資料を探します
2. 資料カードのお気に入りボタン（ハートアイコン）をクリックします
   - または、資料詳細モーダル内のお気に入りボタンをクリックします
3. お気に入りに登録され、ボタンが塗りつぶされた状態（赤色）になります
4. 資料カードにお気に入り数が表示されます

**確認方法**

- お気に入りに登録された資料は、お気に入り一覧画面（`/favorites`）に表示されます
- 資料カードのお気に入りボタンが塗りつぶされた状態になります

### 10.2 お気に入りの解除

**操作方法**

1. お気に入りに登録されている資料のお気に入りボタンを再度クリックします
2. お気に入りから解除され、ボタンが空の状態になります
3. お気に入り一覧からも削除されます

### 10.3 お気に入り一覧

**機能説明**

- お気に入りに登録した資料を一覧表示できます
- カード表示とリスト表示を切り替えられます
- 検索機能でお気に入り資料を絞り込めます

**操作方法**

1. サイドバーから「お気に入り」を選択します
2. お気に入り一覧画面が表示されます
3. 登録した資料が一覧表示されます
4. 表示切替ボタンでカード表示とリスト表示を切り替えられます
5. 検索バーでキーワードを入力すると、お気に入り資料を検索できます

**表示内容**

- 資料のタイトル、説明、カテゴリ、タイプなどが表示されます
- お気に入り数やいいね数も表示されます

---

## 11. 全体状況ページ（管理者のみ）

全体状況ページ（`/overview`）では、システム全体の統計情報やアクティビティ推移を確認できます。管理者のみアクセス可能です。

### アクセス方法

- サイドバーから「利用状況」を選択します（管理者のみ表示）
- または、`/overview` に直接アクセスします

### 画面の構成

- **主要指標カード**: システムの主要な指標をカード形式で表示
- **アクティビティグラフ**: ユーザーや資料のアクティビティをグラフで表示
- **カテゴリ/タイプ別グラフ**: カテゴリやタイプごとの統計を表示
- **資料ランキング**: 人気の資料をランキング形式で表示

### 11.1 主要指標カード

**表示内容**

以下の主要指標がカード形式で表示されます：

- **資料数**: システムに登録されている資料の総数
- **ユーザー数**: システムに登録されているユーザーの総数
- **カテゴリ数**: 登録されているカテゴリの数
- **その他の統計情報**: システムの状態を示す各種指標

**操作方法**

- カードをクリックすると、詳細情報が表示される場合があります
- 各カードには数値と説明が表示されます

### 11.2 アクティビティグラフ

**機能説明**

- ユーザーや資料のアクティビティをグラフで表示します
- 期間や粒度を変更して、異なる視点でデータを確認できます

**操作方法**

1. アクティビティグラフセクションを開きます
2. **期間選択**: 7日、30日、90日、365日から選択します
3. **粒度選択**: 日次、週次、月次から選択します
4. グラフが選択した条件で更新されます

**表示内容**

- **ユーザーアクティビティ**: ユーザーのログインや操作の推移
- **資料アクティビティ**: 資料の作成や更新の推移

### 11.3 カテゴリ/タイプ別グラフ

**機能説明**

- カテゴリやタイプごとの資料数をグラフで表示します
- 円グラフや棒グラフで視覚的に確認できます

**表示内容**

- **カテゴリ別グラフ**: 各カテゴリに属する資料の数
- **タイプ別グラフ**: 各タイプに属する資料の数

### 11.4 資料ランキング

**機能説明**

- 人気の資料をランキング形式で表示します
- いいね数、お気に入り数、閲覧数でランキングを切り替えられます

**操作方法**

1. 資料ランキングセクションを開きます
2. ランキングの種類を選択します：
   - **いいね数**: いいねが多い順
   - **お気に入り数**: お気に入り登録が多い順
   - **閲覧数**: 閲覧回数が多い順
3. ランキングが更新されます
4. 資料をクリックすると、詳細モーダルが開きます

**表示内容**

- ランキング順位
- 資料のタイトル
- いいね数、お気に入り数、閲覧数
- 資料へのリンク

---

## 12. プロフィール編集

プロフィール編集ページ（`/profile`）では、自分のプロフィール情報を編集できます。

### アクセス方法

- ヘッダーのユーザーアイコンをクリックして、メニューから「プロフィール」を選択します
- または、`/profile` に直接アクセスします

### 画面の構成

- **基本情報**: 表示名、メールアドレス、部署、自己紹介など
- **アバター編集**: プロフィール画像のアップロードと編集
- **スキル管理**: スキルの追加・削除
- **資格管理**: 資格の追加・削除
- **職場内資格管理**: 職場内資格の追加・削除

### 12.1 基本情報の編集

**編集可能な項目**

- **表示名**: システム内で表示される名前
- **メールアドレス**: 連絡先メールアドレス
- **部署**: 所属部署
- **自己紹介**: 自己紹介文

**操作方法**

1. プロフィール編集ページを開きます
2. 「基本情報」セクションを開きます
3. 各項目を編集します
4. 「保存」ボタンをクリックします
5. 変更が保存されます

### 12.2 アバター編集

**機能説明**

- プロフィール画像をアップロードして設定できます
- 画像をクロップ（切り抜き）して調整できます
- PNG形式の透過画像に対応しています

**操作方法**

1. プロフィール編集ページを開きます
2. 「アバター編集」セクションを開きます
3. 「画像をアップロード」ボタンをクリックします
4. 画像ファイルを選択します
5. 画像が表示され、クロップエリアが表示されます
6. クロップエリアを調整して、切り抜く範囲を決定します
7. 「保存」ボタンをクリックします
8. アバター画像が更新されます

**対応形式**

- PNG（透過対応）
- JPEG
- その他の一般的な画像形式

### 12.3 スキル/資格/職場内資格の管理

**機能説明**

- 自分のスキル、資格、職場内資格をリスト形式で管理できます
- 項目の追加・削除が可能です

**操作方法**

**項目の追加**

1. プロフィール編集ページを開きます
2. 「スキル管理」「資格管理」「職場内資格管理」のいずれかのセクションを開きます
3. 「追加」ボタンをクリックします
4. 項目名を入力します
5. 「保存」ボタンをクリックします
6. 項目がリストに追加されます

**項目の削除**

1. 削除したい項目の右側にある「削除」ボタンをクリックします
2. 確認ダイアログで「はい」を選択します
3. 項目がリストから削除されます

**表示**

- 追加したスキル、資格、職場内資格は、メンバー詳細モーダルで他のユーザーにも表示されます

---

## 13. フィードバック機能

フィードバック機能では、システムへの意見や要望を投稿できます。

### アクセス方法

- サイドバーから「ご意見・ご要望」を選択します
- または、`/feedback` に直接アクセスします

### 画面の構成

- **フィードバック投稿フォーム**: 新しいフィードバックを投稿するフォーム
- **フィードバック一覧**: 投稿したフィードバックの一覧（自分の投稿と公開された投稿）

### 13.1 フィードバックの投稿

**機能説明**

- システムへの意見や要望を投稿できます
- 公開/非公開を指定できます
- 公開されたフィードバックは他のユーザーにも表示されます

**操作方法**

1. フィードバックページを開きます
2. 「フィードバックを投稿」セクションを開きます
3. 以下の情報を入力します：
   - **タイトル**: フィードバックのタイトル
   - **内容**: フィードバックの本文
   - **公開設定**: 「公開する」にチェックを入れると、他のユーザーにも表示されます
4. 「送信」ボタンをクリックします
5. フィードバックが投稿されます

**公開設定**

- **公開**: 他のユーザーにもフィードバックが表示されます
- **非公開**: 自分と管理者のみがフィードバックを確認できます

### 13.2 フィードバックの管理（管理者）

**機能説明**

- 管理者は、すべてのフィードバックを管理できます
- フィードバックのステータス変更や公開設定が可能です

**アクセス方法**

- サイドバーから「ご意見・ご要望管理」を選択します（管理者のみ表示）
- または、`/admin/feedback` に直接アクセスします

**操作方法**

1. フィードバック管理ページを開きます
2. すべてのフィードバックが一覧表示されます
3. 各フィードバックに対して以下の操作が可能です：
   - **ステータス変更**: 未対応、対応中、対応済みなどに変更
   - **公開設定**: 公開/非公開を切り替え
   - **削除**: フィードバックを削除

---

## 14. 接続状態表示

接続状態表示機能では、システムへの接続状態をリアルタイムで確認できます。

### 表示場所

- ヘッダー右上に接続状態が表示されます
- 通知ポーリングの結果を基に判定されます

### 14.1 状態の種類

**Live（接続中）**

- 通知ポーリングが成功している状態
- システムに正常に接続できています
- 緑色で表示されます

**Dead（切断中）**

- 通知ポーリングが失敗している状態
- システムに接続できていません
- 赤色で表示されます

**Inactive（非アクティブ）**

- 通知ポーリング間隔が「即座」に設定されている状態
- ポーリングが実行されていないため、状態が判定できません
- グレー色で表示されます

### 14.2 状態の確認方法

**操作方法**

1. ヘッダー右上の接続状態表示を確認します
2. 状態に応じて色が変わります：
   - **緑色**: Live（接続中）
   - **赤色**: Dead（切断中）
   - **グレー色**: Inactive（非アクティブ）

**状態の変更**

- 接続状態は通知ポーリングの結果に基づいて自動的に更新されます
- ポーリング間隔を変更すると、状態表示も変わります

> 💡 **メモ**  
> 接続状態は通知ポーリングの結果を基に判定されます。通知ポーリング間隔を「即座」に設定した場合は Inactive と表示されます。

---

## 15. よくある質問（FAQ）

### Q1: 初回アクセス時に何を設定すればよいですか？

A: 初回アクセス時は、ネットワークドライブの設定が必要です。初期設定画面（`/setup`）で、ネットワークパスとドライブレターを設定してください。詳細は「1.1 初期設定画面」を参照してください。

### Q2: 資料を削除した後、復元できますか？

A: はい、可能です。削除した資料はゴミ箱へ移動されます。ゴミ箱画面（`/trash`）から復元できます。詳細は「7. ゴミ箱機能」を参照してください。

### Q3: 他のユーザーが作成した資料を編集できますか？

A: いいえ、できません。資料の編集・削除は作成者のみ可能です。他ユーザーが作成した資料は閲覧専用です。

### Q4: 通知が来ない場合はどうすればよいですか？

A: 以下の点を確認してください：
- 通知ポーリング間隔が適切に設定されているか（設定ページ `/admin` の「通知設定」）
- ブラウザの通知許可が有効になっているか
- 接続状態が Live になっているか（ヘッダー右上の表示を確認）

### Q5: お気に入りに登録した資料はどこで確認できますか？

A: サイドバーから「お気に入り」を選択すると、お気に入り一覧画面（`/favorites`）が表示されます。詳細は「10. お気に入り機能」を参照してください。

### Q6: 検索履歴を削除したい場合はどうすればよいですか？

A: 設定ページ（`/admin`）の「データ管理」セクションから、検索履歴をクリアできます。詳細は「6.2 データ管理」を参照してください。

---

## 16. トラブルシューティング

### 問題: 初期設定画面が表示されない

**解決方法**

1. ブラウザのキャッシュをクリアします
2. 設定ページ（`/admin`）の「ネットワークドライブ設定」から「初期設定を再開」を選択します

### 問題: 資料がアップロードできない

**解決方法**

1. ネットワークドライブが正しくマウントされているか確認します
2. ファイルサイズが大きすぎないか確認します
3. ブラウザのコンソールでエラーメッセージを確認します

### 問題: 通知が表示されない

**解決方法**

1. ブラウザの通知許可を確認します
2. 通知ポーリング間隔が適切に設定されているか確認します（設定ページ `/admin`）
3. 接続状態を確認します（ヘッダー右上の表示）

### 問題: 検索結果が表示されない

**解決方法**

1. 検索キーワードを確認します
2. フィルター条件をリセットします
3. ブラウザのキャッシュをクリアします

---

以上が利用者マニュアルです。不明な点がある場合は、システム管理者にお問い合わせください。
